name: Zephyr Deployment

on: [workflow_call]

# Needed for nx-set-shas when run on the main branch
permissions:
    actions: read
    pull-requests: write
    contents: read

jobs:
    zephyr-deployment:
        runs-on: ubuntu-latest
        timeout-minutes: 10 # Set a timeout for the job to prevent it from running indefinitely
        steps:
            - uses: actions/checkout@v4
              with:
                fetch-depth: 0
            - uses: ./.github/actions/setup-dependencies
            - uses: ./.github/actions/zephyr-deployment
              with:
                auth_token: ${{ secrets.ZE_SECRET_TOKEN }}